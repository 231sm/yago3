# This is a hand-coded file!
# Do not overwrite!
# The order of rules matters!

# Normalize spaces
"[ \t\n\u00A0\u202F\uFEFF]++" mapsTo " "

		
# Define numbers
"-?\d+(\.d+)?(E-?\d+)?" mapsTo "<number:$0>"		
		
# textual numbers, US, Canada and modern British, short scale;
# compare http://en.wikipedia.org/wiki/Names_of_large_numbers#Extensions_of_the_standard_dictionary_numbers
"hundreds?" mapsTo "<number-name:100>"
"thousands?" mapsTo "<number-name:1000>"
"millions?"  mapsTo  "<number-name:1E6>"
"billions?" mapsTo "<number-name:1E9>"
"trillions?"   mapsTo "<number-name:1E12>"
"quadrillions?"  mapsTo "<number-name:1E15>"
"quintillions?" mapsTo "<number-name:1E18>"
"sextillions?"   mapsTo "<number-name:1E21>"
"septillions?"   mapsTo "<number-name:1E24>"
"octillions?"   mapsTo "<number-name:1E27>"
		
"<number:([^>]++)> <number-name:([^>]++)>" mapsTo "<number:$1*$2>"

# time duration				
"\{\{duration\|h=<number:([^>]++)>\|m=<number:([^>]++)>\|s=<number:([^>]++)>\}\}" mapsTo "<number:$1*3600+$2*60+$3> s "
"\{\{duration\|m=<number:([^>]++)>\|s=<number:([^>]++)>\}\}" mapsTo "<number:$1*60+$2> s "
"(\d+):(\d{2}):(\d{2})" mapsTo "<number:$3*3600+$2*60+$3> s "
"(\d+):(\d{2})" mapsTo "<number:$2*60+$3> s "

# quantities

# units
"g/cm\^3\b" mapsTo "<unit:$0:1>"
"mol\b|m/s\b|m^2\b|m^3\b" mapsTo "<unit:$0:1>"
"m\b|s\b|g\b|A\b|K\b|cd\b" mapsTo "<unit:$0:1>"
"Hz\b|°C\b|px\b|Pa\b" mapsTo "<unit:$0:1>"

"metres\b" mapsTo "<unit:m:1>"
"km2\b"  mapsTo "<unit:m^2:1E6>"
"km\^2\b" mapsTo  "<unit:m^2:1E6>"
"km3\b" mapsTo "<unit:m^3:1E9>"
"km\^3\b" mapsTo "<unit:m^3:1E9>"
			
"m/s2\b" mapsTo "<unit:m/s^2:1>"
			
"m2\b" mapsTo "<unit:m^2:1>"
"minutes?\b|min\b" mapsTo "<unit:s:60>"
"h\b" mapsTo "<unit:s:3600>"
			
"km/h" mapsTo "<unit:m/s:0.277777777777777>"
"km/s" mapsTo "<unit:m/s:1000>"

# SI prefixes, compare http://en.wikipedia.org/wiki/Metric_prefix		
"T<unit:([^:]++):([^>]++)>" mapsTo "<unit:$1:$2*1E12>"
"G<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E9>"
"M<unit:([^:]++):([^>]++)>" mapsTo  "<unit:$1:$2*1E6>"
"k<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E3>"
"h<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E2>"
"da<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E1>"
"d<unit:([^:]++):([^>]++)>" mapsTo  "<unit:$1:$2*1E-1>"
"c<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E-2>"
"m<unit:([^:]++):([^>]++)>" mapsTo  "<unit:$1:$2*1E-3>"
"μ<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E-6>"
"n<unit:([^:]++):([^>]++)>"  mapsTo  "<unit:$1:$2*1E-9>"
"p<unit:([^:]++):([^>]++)>" mapsTo  "<unit:$1:$2*1E-12>"

# Free Wikipedia-specific expressions such as  {{val|6378.1|u=km}}
"\{\{val\|<number:([^>]++)>\|e=<number:([^>]++)>\|ul?=<unit:([^>]++)>\}\}" mapsTo "<number:$1E$2> <unit:$3>"
"\{\{convert\|<number:([^>]++)>\|<unit:([^>]++)>\|" mapsTo "<number:$1> <unit:$2>"
"\{\{val\|<number:([^>]++)>\|ul?=<unit:([^>]++)>\}\}" mapsTo "<number:$1> <unit:$2>"
"<number:([^>]++)> ?\[\[<unit:([^>]++)>\]\]" mapsTo "<number:$1> <unit:$2>"

"<number:([^>]++)> ?<unit:([^:]++):([^>]++)>"	mapsTo "<number:$1*$3> <bunit:$2>"
"<number:([^>]++)> <bunit:([^>]++)>"	mapsTo "<result:$1:$2>"
		
		
# currencies
"\$" mapsTo "<currency-name:dollar>"
"€" mapsTo "<currency-name:euro>"
"¥ mapsTo "<currency-name:yen>"
"£ mapsTo "<currency-name:pound>"
"₤" mapsTo "<currency-name:pound>"
"dollars?" mapsTo "<currency-name:dollar>"
"euros?" mapsTo "<currency-name:euro>"
"yen" mapsTo "<currency-name:yen>"
"pounds?" mapsTo "<currency-name:pound>"
"gbp" mapsTo "<currency-name:pound>"

"<number:([^>]++)> ?<currency-name:([^>]++)>" mapsTo "<result:$1:<$2>>"
		
		
# Any left-over numbers are just plain numbers
"<number:([^>]++)>" mapsTo "<result:$1:xsd:decimal>"
"<number:([^>]++)> ?%" mapsTo "<result:$1:<%>>"